--- a/net/minecraft/world/level/storage/Convertable.java
+++ b/net/minecraft/world/level/storage/Convertable.java
@@ -56,6 +56,10 @@
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
+// CraftBukkit start
+import net.minecraft.world.level.dimension.WorldDimension;
+// CraftBukkit end
+
 public class Convertable {
 
     static final Logger LOGGER = LogManager.getLogger();
@@ -216,7 +220,11 @@
                 LevelVersion levelversion = LevelVersion.parse(dynamic);
                 WorldSettings worldsettings = WorldSettings.parse(dynamic, datapackconfiguration);
 
-                return WorldDataServer.parse(dynamic, datafixer, i, nbttagcompound2, worldsettings, levelversion, (GeneratorSettings) pair.getFirst(), (Lifecycle) pair.getSecond());
+                // CraftBukkit start - Add PDC to world
+                WorldDataServer worldDataServer = WorldDataServer.parse(dynamic, datafixer, i, nbttagcompound2, worldsettings, levelversion, (GeneratorSettings) pair.getFirst(), (Lifecycle) pair.getSecond());
+                worldDataServer.pdc = nbttagcompound1.get("BukkitValues");
+                return worldDataServer;
+                // CraftBukkit end
             } catch (Exception exception) {
                 Convertable.LOGGER.error("Exception reading {}", file, exception);
                 return null;
@@ -277,9 +285,23 @@
         return this.backupDir;
     }
 
-    public Convertable.ConversionSession createAccess(String s) throws IOException {
-        return new Convertable.ConversionSession(s);
+    // CraftBukkit start
+    public Convertable.ConversionSession createAccess(String s, ResourceKey<WorldDimension> dimensionType) throws IOException {
+        return new Convertable.ConversionSession(s, dimensionType);
+    }
+
+    public static Path getStorageFolder(Path path, ResourceKey<WorldDimension> dimensionType) {
+        if (dimensionType == WorldDimension.OVERWORLD) {
+            return path;
+        } else if (dimensionType == WorldDimension.NETHER) {
+            return path.resolve("DIM-1");
+        } else if (dimensionType == WorldDimension.END) {
+            return path.resolve("DIM1");
+        } else {
+            return path.resolve("dimensions").resolve(dimensionType.location().getNamespace()).resolve(dimensionType.location().getPath());
+        }
     }
+    // CraftBukkit end
 
     public class ConversionSession implements AutoCloseable {
 
@@ -287,8 +309,12 @@
         public final Path levelPath;
         private final String levelId;
         private final Map<SavedFile, Path> resources = Maps.newHashMap();
+        // CraftBukkit start
+        public final ResourceKey<WorldDimension> dimensionType;
 
-        public ConversionSession(String s) throws IOException {
+        public ConversionSession(String s, ResourceKey<WorldDimension> dimensionType) throws IOException {
+            this.dimensionType = dimensionType;
+            // CraftBukkit end
             this.levelId = s;
             this.levelPath = Convertable.this.baseDir.resolve(s);
             this.lock = SessionLock.create(this.levelPath);
@@ -305,7 +331,7 @@
         }
 
         public Path getDimensionPath(ResourceKey<World> resourcekey) {
-            return DimensionManager.getStorageFolder(resourcekey, this.levelPath);
+            return getStorageFolder(this.levelPath, this.dimensionType); // CraftBukkit
         }
 
         private void checkLock() {
